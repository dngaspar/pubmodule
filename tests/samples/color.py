from __future__ import print_function

from threading import Thread
from time import sleep

from snoop import Config

config = Config(color=True)
snoop = config.snoop
pp = config.pp


def foo():
    raise TypeError


@snoop(depth=2)
def main():
    try:
        (None
         or foo)()
    except:
        pass
    pp(
        [
            x + y
            for x, y in zip(range(1000, 1020), range(2000, 2020))
        ]
    )


def print_output():
    sleep(0.1)
    print(expected_output)


if __name__ == "__main__":
    # main()
    Thread(target=print_output).start()

expected_output = """
[90m12:34:56.78 [0m[36m[1m>>> Call to main in File "/path/to_file.py", line 18[0m
[90m12:34:56.78 [0m[90m  18[0m | [38;5;81mdef[39m[38;5;231m [39m[38;5;148mmain[39m[38;5;231m([39m[38;5;231m)[39m[38;5;231m:[39m
[90m12:34:56.78 [0m[90m  19[0m | [38;5;231m    [39m[38;5;81mtry[39m[38;5;231m:[39m
[90m12:34:56.78 [0m[90m  20[0m | [38;5;231m        [39m[38;5;231m([39m[38;5;81mNone[39m
[90m12:34:56.78 [0m[90m  21[0m | [38;5;231m         [39m[38;5;197mor[39m[38;5;231m [39m[38;5;231mfoo[39m[38;5;231m)[39m[38;5;231m([39m[38;5;231m)[39m
[90m    12:34:56.78 [0m[36m[1m>>> Call to foo in File "/path/to_file.py", line 13[0m
[90m    12:34:56.78 [0m[90m  13[0m | [38;5;81mdef[39m[38;5;231m [39m[38;5;148mfoo[39m[38;5;231m([39m[38;5;231m)[39m[38;5;231m:[39m
[90m    12:34:56.78 [0m[90m  14[0m | [38;5;231m    [39m[38;5;81mraise[39m[38;5;231m [39m[38;5;148mTypeError[39m
[90m    12:34:56.78 [0m[31m[1m!!! TypeError[0m
[90m    12:34:56.78 [0m[31m[1m!!! Call ended by exception[0m
[90m12:34:56.78 [0m[90m  21[0m | [38;5;231m         [39m[38;5;197mor[39m[38;5;231m [39m[38;5;231mfoo[39m[38;5;231m)[39m[38;5;231m([39m[38;5;231m)[39m
[90m12:34:56.78 [0m[31m[1m!!! TypeError[0m
[90m12:34:56.78 [0m[31m[1m!!! When calling: [0m(None
[90m12:34:56.78 [0m                  or foo)()
[90m12:34:56.78 [0m[90m  22[0m | [38;5;231m    [39m[38;5;81mexcept[39m[38;5;231m:[39m
[90m12:34:56.78 [0m[90m  23[0m | [38;5;231m        [39m[38;5;81mpass[39m
[90m12:34:56.78 [0m[90m  24[0m | [38;5;231m    [39m[38;5;231mpp[39m[38;5;231m([39m
[90m12:34:56.78 [0m[90m  26[0m | [38;5;231m            [39m[38;5;231mx[39m[38;5;231m [39m[38;5;197m+[39m[38;5;231m [39m[38;5;231my[39m
[90m12:34:56.78 [0m[90m  27[0m | [38;5;231m            [39m[38;5;81mfor[39m[38;5;231m [39m[38;5;231mx[39m[38;5;231m,[39m[38;5;231m [39m[38;5;231my[39m[38;5;231m [39m[38;5;197min[39m[38;5;231m [39m[38;5;231mzip[39m[38;5;231m([39m[38;5;231mrange[39m[38;5;231m([39m[38;5;141m1000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1020[39m[38;5;231m)[39m[38;5;231m,[39m[38;5;231m [39m[38;5;231mrange[39m[38;5;231m([39m[38;5;141m2000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2020[39m[38;5;231m)[39m[38;5;231m)[39m
[90m    12:34:56.78 [0mList comprehension:
[90m    12:34:56.78 [0m[90m  26[0m | [38;5;231m            [39m[38;5;231mx[39m[38;5;231m [39m[38;5;197m+[39m[38;5;231m [39m[38;5;231my[39m
[90m    12:34:56.78 [0m.......... Iterating over [38;5;197m<[39m[38;5;231mzip[39m[38;5;231m [39m[38;5;231mobject[39m[38;5;231m [39m[38;5;231mat[39m[38;5;231m [39m[38;5;141m0x115caa1c8[39m[38;5;197m>[39m
[90m    12:34:56.78 [0m.......... Values of x: [38;5;141m1000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1001[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1002[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1003[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1004[39m[38;5;231m,[39m[38;5;231m [39m[38;5;197m.[39m[38;5;197m.[39m[38;5;197m.[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1015[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1016[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1017[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1018[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1019[39m
[90m    12:34:56.78 [0m.......... Values of y: [38;5;141m2000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2001[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2002[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2003[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2004[39m[38;5;231m,[39m[38;5;231m [39m[38;5;197m.[39m[38;5;197m.[39m[38;5;197m.[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2015[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2016[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2017[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2018[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2019[39m
[90m    12:34:56.78 [0mResult: [38;5;231m[[39m[38;5;141m3000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3002[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3004[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3006[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3008[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3010[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3012[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3014[39m[38;5;231m,[39m[38;5;231m [39m[38;5;197m.[39m[38;5;197m.[39m[38;5;197m.[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3024[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3026[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3028[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3030[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3032[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3034[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3036[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m3038[39m[38;5;231m][39m
[90m12:34:56.78 [0mLOG:
[90m12:34:56.78 [0m.... [38;5;231m[[39m
[90m12:34:56.78 [0m     [38;5;231m    [39m[38;5;231mx[39m[38;5;231m [39m[38;5;197m+[39m[38;5;231m [39m[38;5;231my[39m
[90m12:34:56.78 [0m     [38;5;231m    [39m[38;5;81mfor[39m[38;5;231m [39m[38;5;231mx[39m[38;5;231m,[39m[38;5;231m [39m[38;5;231my[39m[38;5;231m [39m[38;5;197min[39m[38;5;231m [39m[38;5;231mzip[39m[38;5;231m([39m[38;5;231mrange[39m[38;5;231m([39m[38;5;141m1000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1020[39m[38;5;231m)[39m[38;5;231m,[39m[38;5;231m [39m[38;5;231mrange[39m[38;5;231m([39m[38;5;141m2000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2020[39m[38;5;231m)[39m[38;5;231m)[39m
[90m12:34:56.78 [0m     [38;5;231m][39m = [3000,
[90m12:34:56.78 [0m          3002,
[90m12:34:56.78 [0m          3004,
[90m12:34:56.78 [0m          3006,
[90m12:34:56.78 [0m          3008,
[90m12:34:56.78 [0m          3010,
[90m12:34:56.78 [0m          3012,
[90m12:34:56.78 [0m          3014,
[90m12:34:56.78 [0m          3016,
[90m12:34:56.78 [0m          3018,
[90m12:34:56.78 [0m          3020,
[90m12:34:56.78 [0m          3022,
[90m12:34:56.78 [0m          3024,
[90m12:34:56.78 [0m          3026,
[90m12:34:56.78 [0m          3028,
[90m12:34:56.78 [0m          3030,
[90m12:34:56.78 [0m          3032,
[90m12:34:56.78 [0m          3034,
[90m12:34:56.78 [0m          3036,
[90m12:34:56.78 [0m          3038]
[90m12:34:56.78 [0m[90m  27[0m | [38;5;231m            [39m[38;5;81mfor[39m[38;5;231m [39m[38;5;231mx[39m[38;5;231m,[39m[38;5;231m [39m[38;5;231my[39m[38;5;231m [39m[38;5;197min[39m[38;5;231m [39m[38;5;231mzip[39m[38;5;231m([39m[38;5;231mrange[39m[38;5;231m([39m[38;5;141m1000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m1020[39m[38;5;231m)[39m[38;5;231m,[39m[38;5;231m [39m[38;5;231mrange[39m[38;5;231m([39m[38;5;141m2000[39m[38;5;231m,[39m[38;5;231m [39m[38;5;141m2020[39m[38;5;231m)[39m[38;5;231m)[39m
[90m12:34:56.78 [0m[32m[1m<<< Return value from main: [0m[38;5;81mNone[39m
"""
